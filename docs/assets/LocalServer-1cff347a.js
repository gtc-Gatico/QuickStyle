import{T as W}from"./style-a86fcfd7.js";import{B as w}from"./style-c2119849.js";import{I as N}from"./style-986a1148.js";import{q as b,g as _,h as C,a as n,j as r,y as O,F as x,l as i}from"./index-e295725e.js";const T={__name:"LocalServer",setup(y){let e;function u(){e=new WebSocket("ws://localhost:80/"),e.onopen=function(){console.log("websocket:open.")},e.onmessage=function(o){c.value+=o.data},e.onerror=function(o){console.log("websocket:error.")}}function p(){k("hello"),window.location.href="icetool://111",u()}function S(){k("exit")}function m(o){o&&(console.log(o.target),o.target.scrollTop=o.target.scrollHeight)}u();const l=b("ping baidu.com"),c=b("");function d(){if(e.readyState==WebSocket.OPEN)e.send(l.value),console.log("websocket:send.");else switch(e.readyState){case WebSocket.CONNECTING:console.log("WebSocket正在连接.");break;case WebSocket.OPEN:break;case WebSocket.CLOSING:console.log("WebSocket正在关闭.");break;case WebSocket.CLOSED:console.log("WebSocket已经关闭.")}}function k(o){if(e.readyState==WebSocket.OPEN)e.send(o),console.log("websocket:send.");else switch(e.readyState){case WebSocket.CONNECTING:console.log("WebSocket正在连接.");break;case WebSocket.OPEN:break;case WebSocket.CLOSING:console.log("WebSocket正在关闭.");break;case WebSocket.CLOSED:console.log("WebSocket已经关闭.")}}return(o,t)=>{const f=N,s=w,g=W;return _(),C(x,null,[n(f,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value=a)},null,8,["modelValue"]),n(s,{onClick:d,onKeyup:O(d,["enter"])},{default:r(()=>[i("发送")]),_:1},8,["onKeyup"]),n(s,{onClick:p},{default:r(()=>[i("开启本地服务")]),_:1}),n(s,{onClick:S},{default:r(()=>[i("关闭本地服务")]),_:1}),n(g,{id:"data",modelValue:c.value,"onUpdate:modelValue":[t[1]||(t[1]=a=>c.value=a),t[2]||(t[2]=a=>m(a))],autosize:"",style:{"max-height":"50vh"}},null,8,["modelValue"])],64)}}};export{T as default};
